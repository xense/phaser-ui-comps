{"version":3,"sources":["webpack://PhaserComps/webpack/universalModuleDefinition","webpack://PhaserComps/webpack/bootstrap","webpack://PhaserComps/./src/components/UIComponentPrototype.js","webpack://PhaserComps/external {\"umd\":\"phaser\",\"commonjs2\":\"phaser\",\"commonjs\":\"phaser\",\"amd\":\"phaser\",\"root\":\"Phaser\"}","webpack://PhaserComps/./src/components/UIButton.js","webpack://PhaserComps/./src/manager/UIManager.js","webpack://PhaserComps/./src/phasercomps.js","webpack://PhaserComps/./src/clip/ComponentClip.js","webpack://PhaserComps/./src/components/UIButtonSelect.js","webpack://PhaserComps/./src/components/UIButtonDraggable.js","webpack://PhaserComps/./src/components/UIScrollBar.js","webpack://PhaserComps/./src/components/UIList.js","webpack://PhaserComps/./src/components/UIComponents.js","webpack://PhaserComps/./src/components/UIButtonRadio.js","webpack://PhaserComps/./src/components/UIScrollPanel.js","webpack://PhaserComps/./src/components/UIProgressBar.js","webpack://PhaserComps/./src/components/UIContainer.js","webpack://PhaserComps/./src/components/UIListBaseItem.js","webpack://PhaserComps/./src/plugin/Plugin.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__1__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","UIComponentPrototype","parent","_classCallCheck","this","_this","_possibleConstructorReturn","__proto__","getPrototypeOf","_lockId","_parent","_key","_clip","_texts","on","_onEventState","_clipUpdate","clip","removeClip","onClipAppend","_clipProcess","onClipRemove","stateId","getStateId","_setupState","text","textField","getChildText","fromScene","removeListener","destroy","_get","getChildClip","appendClip","doState","onClipProcess","textKey","setState","emit","PhaserComps","UIManager","unregister","register","Phaser","Events","EventEmitter","UIButton","labelText","_enable","_isPressed","_isOver","_hitZone","label","_updateInteractive","zone","_removeInteractive","setInteractive","useHandCursor","_onPointerDown","_onPointerUp","_onPointerOver","_onPointerOut","disableInteractive","Input","GAMEOBJECT_POINTER_DOWN","GAMEOBJECT_POINTER_UP","GAMEOBJECT_POINTER_OVER","GAMEOBJECT_POINTER_OUT","enable","_setupInteractive","STATE_DOWN","STATE_OVER","STATE_UP","STATE_DISABLE","pointer","localX","localY","event","stopPropagation","isClicked","check","lockId","_onClick","getText","setText","getBounds","isLock","enabledIds","registeredComps","id","rewrite","arguments","length","undefined","unlock","push","forEach","proto","indexOf","getById","lockClipBounds","lockClip","ComponentClip","UIComponents","Plugin","_phaser","scene","config","textures","childComponentClips","_config","_textures","Array","isArray","imageFramesMap","_stateManager","StateManager","_childrenById","_createImagesMap","_parseConfig","getStateConfigById","stateIds","force","childId","params","_setupCommonParams","getActiveComponentByKey","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","iterator","next","done","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","textureName","texture","frames","getFrameNames","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","frameName","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","children","childConfig","_createChildFromConfig","child","childKey","addAsChild","type","_createImageFromConfig","_createTextFromConfig","_createTileSpriteFromConfig","_createHitZoneFromConfig","_createPolygonFromConfig","mask","createGeometryMask","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","masking","maskedChildId","setMask","add","addComponent","shape","make","graphics","fillStyle","color","alpha","beginPath","vertices","verticesLength","lineTo","closePath","fillPath","existing","sprite","tileSprite","width","height","image","setOrigin","textStyle","align","x","y","component","scaleX","scaleY","angle","GameObjects","Container","State","componentIds","keys","_dynamicChildrenIds","_states","_components","_currentState","_currentStateId","_componentKeys","_residentComponentsByKey","idsArray","states","state","apply","_toConsumableArray","uniq","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","includes","setupState","idsToShow","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","visible","_UIButton2","UIButtonSelect","_select","UIButtonDraggable","_dragBounds","minX","maxX","minY","maxY","_startDragX","_startDragY","_dragZone","gameObject","input","dragStartX","dragStartY","dragX","dragY","newX","newY","setDraggable","_onDragStart","_onDrag","UIScrollBar","vertical","_vertical","_value","_minValue","_maxValue","_valueStep","_buttonStep","btnPrev","EVENT_CLICK","onPrevClick","btnNext","onNextClick","thumb","EVENT_DRAG","_onThumbDrag","_trackStart","_trackLength","_thumbClip","minValue","maxValue","valueStep","val","_updateClips","trackClip","setDragBounds","hitZone","_onZoneDown","_updateThumbFromValue","barPosition","Math","round","positionX","positionY","v","_UIComponentPrototype2","UIList","rendererClass","_rendererClass","_items","pop","len","_data","index","dataItem","_getRenderer","data","renderer","EVENT_ITEM_CHANGE","onItemChange","clean","item","_updateData","UIButtonRadio","UIScrollPanel","UIProgressBar","UIContainer","UIListBaseItem","_UIButtonSelect2","appendTo","_sibling","appendToRadio","radio","removeFromSibling","select","_set","_broadcastSelect","container","panelKey","scrollBarKey","dimensionsKey","_container","EVENT_STATE","_onContainerUpdate","_panelKey","_dimensionsKey","_scrollBar","EVENT_CHANGE","_onScrollBar","_panel","dims","_scrollBounds","PROGRESS_STATE_REGEX","_steps","_makeSteps","_applyValue","lowConfig","highConfig","interpolation","resultConfig","stepsCount","low","high","stepValue","lowChildConfig","highChildConfig","applyChildParams","getStateIds","test","stepConfig","stepObject","parseInt","exec","stateConfig","getStateConfig","_makeFullConfig","sort","a","b","_children","_addUIComponentToContainerClip","splice","_removeUIComponentFromContainerClip","destroyChild","remove","_commitData","mgr","registerGameObject","makeComponent","Plugins","BasePlugin","DefaultCfg","plugin","start"],"mappings":"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","file":"phaser-ui-comps.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"phaser\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"phaser\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"PhaserComps\"] = factory(require(\"phaser\"));\n\telse\n\t\troot[\"PhaserComps\"] = factory(root[\"Phaser\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__1__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n","import Phaser from \"phaser\";\r\nimport PhaserComps from \"../phasercomps\";\r\n\r\nconst _EVENT_STATE = \"event_state\";\r\n\r\n/**\r\n * @memberOf PhaserComps.UIComponents\r\n * @class UIComponentPrototype\r\n * @classdesc Base ComponentView controller class. Used to setup component state and texts.\r\n * Once root instance is created, you must append a [ComponentClip]{@link PhaserComps.ComponentClip}\r\n * instance to it.\r\n *\r\n * Child clips will be appended automatically on every state change, their clips will be found by keys.\r\n * On state change notifies all child components to update their states.\r\n *\r\n * *One of the main ideas of this framework is if there is no clip for UIComponentPrototype\r\n * at current state or at all, nothing bad happens.*\r\n * @inheritDoc\r\n * @extends Phaser.Events.EventEmitter\r\n * @property {String} lockId Used by UIManager, see {@link PhaserComps.UIManager}\r\n * @param {PhaserComps.UIComponents.UIComponentPrototype} [parent] UIComponentPrototype instance to find clip inside\r\n * @param {String} [key] key to find clip inside parent\r\n */\r\nexport default class UIComponentPrototype extends Phaser.Events.EventEmitter {\r\n\r\n\tstatic get EVENT_STATE() { return _EVENT_STATE; }\r\n\r\n\t/**\r\n\t * @param {PhaserComps.UIComponents.UIComponentPrototype} parent\r\n\t * @param {String} key\r\n\t */\r\n\tconstructor(parent, key) {\r\n\t\tsuper();\r\n\r\n\t\t/**\r\n\t\t * @type {String}\r\n\t\t */\r\n\t\tthis._lockId = null;\r\n\r\n\t\t/**\r\n\t\t *\r\n\t\t * @type {UIComponentPrototype}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._parent = parent;\r\n\r\n\t\t/**\r\n\t\t *\r\n\t\t * @type {String}\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._key = key;\r\n\r\n\t\t/**\r\n\t\t *\r\n\t\t * @type {PhaserComps.ComponentClip}\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._clip = null;\r\n\r\n\t\t/**\r\n\t\t *\r\n\t\t * @type {Object<String>}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._texts = {};\r\n\r\n\t\tif (key && parent) {\r\n\t\t\t// sign on parents state update\r\n\t\t\tparent.on(_EVENT_STATE, this._onEventState, this);\r\n\t\t}\r\n\t\tthis._clipUpdate();\r\n\t}\r\n\r\n\t/**\r\n\t * @public\r\n\t * @method PhaserComps.UIComponents.UIComponentPrototype#appendClip\r\n\t * @description\r\n\t * Append a instance to this to control it. State setup will be processed immediately.<br>\r\n\t * Use only for root instance, child instances will be appended automatically depending on state of this.\r\n\t * @param {PhaserComps.ComponentClip} clip ComponentView instance to append\r\n\t */\r\n\tappendClip(clip) {\r\n\t\tif (this._clip === clip) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this._clip !== null) {\r\n\t\t\tthis.removeClip();\r\n\t\t}\r\n\t\tthis._clip = clip;\r\n\t\tif (this._clip) {\r\n\t\t\tthis.onClipAppend(this._clip);\r\n\t\t}\r\n\t\tthis._clipProcess();\r\n\t}\r\n\r\n\t/** @return {String} */\r\n\tget lockId() {\r\n\t\treturn this._lockId;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Phaser.Geom.Rectangle}\r\n\t */\r\n\tget lockClipBounds() { return null; } // override\r\n\r\n\t/** @return {Phaser.GameObjects.GameObject|*} */\r\n\tget lockClip() { return null; } // override\r\n\r\n\t/** @param {string} value */\r\n\tset lockId(value) {\r\n\t\tif (this._lockId === value) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this._lockId) {\r\n\t\t\tPhaserComps.UIManager.unregister(this);\r\n\t\t}\r\n\t\tthis._lockId = value;\r\n\t\tif (this._lockId) {\r\n\t\t\tPhaserComps.UIManager.register(this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Override this, if you want to do something, when new clip removed,\r\n\t * @method PhaserComps.UIComponents.UIComponentPrototype#onClipAppend\r\n\t * @protected\r\n\t * @param {PhaserComps.ComponentClip} clip\r\n\t */\r\n\tonClipAppend(clip) {\r\n\t\t// override me\r\n\t}\r\n\r\n\t/**\r\n\t * @public\r\n\t * @method PhaserComps.UIComponents.UIComponentPrototype#removeClip\r\n\t * @protected\r\n\t */\r\n\tremoveClip() {\r\n\t\tthis.onClipRemove(this._clip);\r\n\t\tthis._clip = null;\r\n\t}\r\n\r\n\t/**\r\n\t * Override this, if you want to do something, when new clip removed,\r\n\t * like remove clip events listeners.\r\n\t * @method PhaserComps.UIComponents.UIComponentPrototype#onClipRemove\r\n\t * @protected\r\n\t * @param clip\r\n\t */\r\n\tonClipRemove(clip) {\r\n\t\t// override me\r\n\t}\r\n\r\n\t/**\r\n\t * Call doState to setup new state, id is provided by [getStateId]{@link PhaserComps.UIComponents.UIComponentPrototype#getStateId}\r\n\t * @method PhaserComps.UIComponents.UIComponentPrototype#doState\r\n\t * @protected\r\n\t * @see #getStateId\r\n\t */\r\n\tdoState() {\r\n\t\tlet stateId = this.getStateId();\r\n\t\tthis._setupState(stateId);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns saved text by key, if it was set previously\r\n\t * @method PhaserComps.UIComponents.UIComponentPrototype#getText\r\n\t * @param {String} key\r\n\t * @returns {String|Array<String>} text value\r\n\t */\r\n\tgetText(key) {\r\n\t\treturn this._texts[key];\r\n\t}\r\n\r\n\t/**\r\n\t * Set text value to the textfield with provided key.\r\n\t * Text value is saved in the component's instance dictionary and will be set to the textField on every state change\r\n\t * @method PhaserComps.UIComponents.UIComponentPrototype#setText\r\n\t * @param {String} key TextField key\r\n\t * @param {String|Array<String>} text text string\r\n\t */\r\n\tsetText(key, text) {\r\n\t\tif (this._texts[key] === text) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._texts[key] = text;\r\n\t\tif (this._clip) {\r\n\t\t\tlet textField = this._clip.getChildText(key);\r\n\t\t\tif (textField) {\r\n\t\t\t\ttextField.text = text;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.UIComponents.UIComponentPrototype#getStateId\r\n\t * @description\r\n\t * Current state id, used by [doState]{@link PhaserComps.UIComponents.UIComponentPrototype#doState} method\r\n\t * @returns {String}\r\n\t * @protected\r\n\t */\r\n\tgetStateId() {\r\n\t\treturn \"default\";\r\n\t}\r\n\r\n\t/**\r\n\t * Destroy ComponentPrototype and clip, if exists\r\n\t * @method PhaserComps.UIComponents.UIComponentPrototype#destroy\r\n\t * @protected\r\n\t * @param {Boolean} [fromScene=false]\r\n\t */\r\n\tdestroy(fromScene) {\r\n\t\tif (this._parent){\r\n\t\t\tthis._parent.removeListener(_EVENT_STATE, this._onEventState);\r\n\t\t}\r\n\t\tif (this._clip) {\r\n\t\t\tthis._clip.destroy(fromScene);\r\n\t\t}\r\n\t\tsuper.destroy();\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.UIComponents.UIComponentPrototype#_clipUpdate\r\n\t * @private\r\n\t */\r\n\t_clipUpdate() {\r\n\t\tif (!this._key) {\r\n\t\t\t// parent is clip itself\r\n\t\t} else {\r\n\t\t\tif (this._parent._clip) {\r\n\t\t\t\tlet clip = this._parent._clip.getChildClip(this._key);\r\n\t\t\t\tthis.appendClip(clip);\r\n\t\t\t} else {\r\n\t\t\t\tthis.appendClip(null);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.UIComponents.UIComponentPrototype#_clipProcess\r\n\t * @private\r\n\t */\r\n\t_clipProcess() {\r\n\t\tif (!this._clip) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.doState();\r\n\t\tthis.onClipProcess();\r\n\t}\r\n\r\n\t/**\r\n\t * Override this, if you want to do something, when state or clip changes.\r\n\t * @method PhaserComps.UIComponents.UIComponentPrototype#onClipProcess\r\n\t * @protected\r\n\t * @override\r\n\t */\r\n\tonClipProcess() {\r\n\t\t// override me\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.UIComponents.UIComponentPrototype#_setupState\r\n\t * @param {String} stateId state id to setup\r\n\t * @private\r\n\t */\r\n\t_setupState(stateId) {\r\n\t\tif (this._clip) {\r\n\t\t\tthis._clip.setState(stateId);\r\n\r\n\t\t\t// update textfields\r\n\t\t\tfor (let textKey in this._texts) {\r\n\t\t\t\tlet textField = this._clip.getChildText(textKey);\r\n\t\t\t\tif (textField) {\r\n\t\t\t\t\ttextField.text = this._texts[textKey];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.emit(_EVENT_STATE);\r\n\t}\r\n\r\n\t/**\r\n\t * Parent state change listener\r\n\t * @method PhaserComps.UIComponents.UIComponentPrototype#_onEventState\r\n\t * @private\r\n\t */\r\n\t_onEventState() {\r\n\t\tthis._clipUpdate();\r\n\t}\r\n}","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","import UIComponentPrototype from \"./UIComponentPrototype\";\r\nimport UIManager from \"../manager/UIManager\";\r\nimport Phaser from \"phaser\";\r\n\r\nconst HIT_ZONE = \"HIT_ZONE\";\r\nconst LABEL = \"label\";\r\n\r\nconst _STATE_UP = \"up\";\r\nconst _STATE_DOWN = \"down\";\r\nconst _STATE_OVER = \"over\";\r\nconst _STATE_DISABLE = \"disable\";\r\n\r\nconst _EVENT_CLICK = \"event_click\";\r\n\r\n/**\r\n * @class UIButton\r\n * @memberOf PhaserComps.UIComponents\r\n * @classdesc\r\n * Button component prototype, has states `up`, `over`, `down`, `disable`\r\n * Emits EVENT_CLICK on click.\r\n * When disabled, doesn't interact to mouse events and move to state `disable`\r\n * @extends PhaserComps.UIComponents.UIComponentPrototype\r\n * @emits PhaserComps.UIComponents.UIButton.EVENT_CLICK\r\n *\r\n * @property {Boolean} enable activate/deactivate button interaction. if false, button state is set to `disable`\r\n * @property {String} label get/set button label text\r\n *\r\n * @param {PhaserComps.UIComponents.UIComponentPrototype} [parent] UIComponentPrototype instance to find clip inside\r\n * @param {String} [key] key to find clip inside parent\r\n * @param {String} [labelText] text to set for a 'label' key\r\n */\r\nexport default class UIButton extends UIComponentPrototype {\r\n\r\n\t/**\r\n\t * @event PhaserComps.UIComponents.UIButton.EVENT_CLICK\r\n\t * @memberOf PhaserComps.UIComponents.UIButton\r\n\t * @description\r\n\t * Emitted on click\r\n\t */\r\n\tstatic get EVENT_CLICK() { return _EVENT_CLICK; }\r\n\r\n\tconstructor(parent, key, labelText) {\r\n\t\tsuper(parent, key);\r\n\t\tthis._enable = true;\r\n\t\tthis._isPressed = false;\r\n\t\tthis._isOver = false;\r\n\t\t/**\r\n\t\t * @type {Phaser.GameObjects.Zone}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._hitZone = null;\r\n\t\tif (labelText) {\r\n\t\t\tthis.label = labelText;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.UIComponents.UIButton#onClipAppend\r\n\t * @inheritDoc\r\n\t */\r\n\tonClipAppend(clip) {\r\n\t\tthis._updateInteractive();\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.UIComponents.UIButton#onClipRemove\r\n\t * @inheritDoc\r\n\t */\r\n\tonClipRemove(clip) {\r\n\t\tlet zone = clip.getChildClip(HIT_ZONE);\r\n\t\tif (!zone) {\r\n\t\t\t//console.warn(\"no hit zone for\", this._key);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._removeInteractive(zone);\r\n\t}\r\n\r\n\tget label() { return this.getText(LABEL); }\r\n\tset label(value) {\r\n\t\tthis.setText(LABEL, value);\r\n\t}\r\n\r\n\tget enable() { return this._enable; }\r\n\tset enable(value) {\r\n\t\tif (this._enable === value) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._enable = value;\r\n\t\tthis._updateInteractive();\r\n\t\tthis.doState();\r\n\t}\r\n\r\n\t/**\r\n\t * @method UIButton#_setupInteractive\r\n\t * @param {Phaser.GameObjects.Zone} zone\r\n\t * @private\r\n\t */\r\n\t_setupInteractive(zone) {\r\n\t\tzone.setInteractive({ useHandCursor: true });\r\n\t\tzone.on(\"pointerdown\", this._onPointerDown, this);\r\n\t\tzone.on(\"pointerup\", this._onPointerUp, this);\r\n\t\tzone.on(\"pointerover\", this._onPointerOver, this);\r\n\t\tzone.on(\"pointerout\", this._onPointerOut, this);\r\n\t\tthis._hitZone = zone;\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.UIComponents.UIButton#_removeInteractive\r\n\t * @param {Phaser.GameObjects.Zone} zone\r\n\t * @private\r\n\t */\r\n\t_removeInteractive(zone) {\r\n\t\tzone.disableInteractive();\r\n\t\tzone.removeListener(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN, this._onPointerDown, this);\r\n\t\tzone.removeListener(Phaser.Input.Events.GAMEOBJECT_POINTER_UP, this._onPointerUp, this);\r\n\t\tzone.removeListener(Phaser.Input.Events.GAMEOBJECT_POINTER_OVER, this._onPointerOver, this);\r\n\t\tzone.removeListener(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT, this._onPointerOut, this);\r\n\t\tthis._hitZone = null;\r\n\t}\r\n\r\n\tget lockClipBounds() {\r\n\t\treturn this._hitZone ? this._hitZone.getBounds() : null;\r\n\t}\r\n\r\n\tget lockClip() {\r\n\t\treturn this._hitZone;\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.UIComponents.UIButton#_updateInteractive\r\n\t * @private\r\n\t */\r\n\t_updateInteractive() {\r\n\t\tif (!this._clip) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet zone = this._clip.getChildClip(HIT_ZONE);\r\n\t\tif (!zone) {\r\n\t\t\t//console.warn(\"no hit zone for\", this._key);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.enable) {\r\n\t\t\tthis._setupInteractive(zone);\r\n\t\t} else {\r\n\t\t\tthis._removeInteractive(zone);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.UIComponents.UIButton#getStateId\r\n\t * @inheritDoc\r\n\t * @returns {String}\r\n\t */\r\n\tgetStateId() {\r\n\t\tif (!this.enable) {\r\n\t\t\treturn this.STATE_DISABLE;\r\n\t\t}\r\n\t\tif (this._isPressed) {\r\n\t\t\treturn this.STATE_DOWN;\r\n\t\t}\r\n\t\tif (this._isOver) {\r\n\t\t\treturn this.STATE_OVER;\r\n\t\t}\r\n\t\treturn this.STATE_UP;\r\n\t}\r\n\r\n\t/**\r\n\t * @protected\r\n\t * @method PhaserComps.UIComponents.UIButton#_onClick\r\n\t * @description\r\n\t * called when button hit zone clicked, emits EVENT_CLICK\r\n\t */\r\n\t_onClick() {\r\n\t\tthis.emit(_EVENT_CLICK);\r\n\t}\r\n\r\n\tget STATE_UP() { return _STATE_UP; }\r\n\tget STATE_DOWN() { return _STATE_DOWN; }\r\n\tget STATE_OVER() { return _STATE_OVER; }\r\n\tget STATE_DISABLE() { return _STATE_DISABLE; }\r\n\r\n\t/**\r\n\t * @method UIButton#_onPointerOut\r\n\t * @protected\r\n\t */\r\n\t_onPointerOut() {\r\n\t\tthis._isOver = false;\r\n\t\tthis._isPressed = false;\r\n\t\tthis.doState();\r\n\t}\r\n\r\n\t/**\r\n\t * @method UIButton#_onPointerOver\r\n\t * @protected\r\n\t */\r\n\t_onPointerOver() {\r\n\t\tthis._isOver = true;\r\n\t\tthis.doState();\r\n\t}\r\n\r\n\t/**\r\n\t * @method UIButton#_onPointerDown\r\n\t * @protected\r\n\t */\r\n\t_onPointerDown(pointer, localX, localY, event) {\r\n\t\tthis._isPressed = true;\r\n\t\tthis.doState();\r\n\t\tevent.stopPropagation();\r\n\t}\r\n\r\n\t/**\r\n\t * @method UIButton#_onPointerUp\r\n\t * @protected\r\n\t */\r\n\t_onPointerUp(pointer, localX, localY, event) {\r\n\t\tlet isClicked = this._isPressed && this._isOver;\r\n\t\tthis._isPressed = false;\r\n\t\tthis.doState();\r\n\t\tif (isClicked) {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tif (UIManager.check(this.lockId)) {\r\n\t\t\t\tthis._onClick();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @method UIButton#destroy\r\n\t * @protected\r\n\t * @inheritDoc\r\n\t */\r\n\tdestroy(fromScene) {\r\n\t\tif (this._clip) {\r\n\t\t\tlet zone = this._clip.getChildClip(HIT_ZONE);\r\n\t\t\tif (zone) {\r\n\t\t\t\tthis._removeInteractive(zone);\r\n\t\t\t}\r\n\t\t}\r\n\t\tsuper.destroy(fromScene);\r\n\t}\r\n}","let isLock = false;\r\nconst enabledIds = [];\r\nconst registeredComps = {};\r\n\r\n/**\r\n * @namespace PhaserComps.UIManager\r\n * @memberOf PhaserComps\r\n * @classdesc Allows to lock all ui, except for provided lock ids.\r\n * For this, you must set `lockId` property to UIComponentPrototype instances you want to enable,\r\n * and then switch theirs availability by UIManager's\r\n * {@link lock} and {@link unlock} methods\r\n *\r\n * For example, locked UIButton will still interact to mouse events, but will not emit click event.\r\n *\r\n * This can be useful in game tutorials.\r\n */\r\nexport default class UIManager {\r\n\r\n\t/**\r\n\t * @memberOf PhaserComps.UIManager\r\n\t * @description Makes only components with provided ids list (or one id string) to emit UI events\r\n\t *\r\n\t * @param {String | Array<String>} id component's lock id, or Array of lock ids to be only enabled\r\n\t * @param {boolean} [rewrite=true] rewrite current list if true, otherwise add to list\r\n\t */\r\n\tstatic lock(id, rewrite = true) {\r\n\t\tif (rewrite) {\r\n\t\t\tthis.unlock();\r\n\t\t}\r\n\t\tif (typeof id === \"string\") {\r\n\t\t\tenabledIds.push(id);\r\n\t\t} else {\r\n\t\t\tid.forEach(value => enabledIds.push(value));\r\n\t\t}\r\n\t\tisLock = true;\r\n\t}\r\n\r\n\t/**\r\n\t * @memberOf PhaserComps.UIManager\r\n\t * @description Releases all components\r\n\t */\r\n\tstatic unlock() {\r\n\t\tenabledIds.length = 0;\r\n\t\tisLock = false;\r\n\t}\r\n\r\n\t/** @param {UIComponentPrototype} proto */\r\n\tstatic register(proto) {\r\n\t\tregisteredComps[proto.lockId] = proto;\r\n\t}\r\n\r\n\t/** @param {UIComponentPrototype} proto */\r\n\tstatic unregister(proto) {\r\n\t\tif (registeredComps[proto.lockId]) {\r\n\t\t\tregisteredComps[proto.lockId] = null;\r\n\t\t\tdelete registeredComps[proto.lockId];\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @memberOf PhaserComps.UIManager\r\n\t * @description called from component to check, if it's allowed to emit UI event.\r\n\t * @param {String} id\r\n\t */\r\n\tstatic check(id) {\r\n\t\tif (!isLock) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn enabledIds.indexOf(id) !== -1;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} id\r\n\t * @return {PhaserComps.UIComponents.UIComponentPrototype}\r\n\t */\r\n\tstatic getById(id) {\r\n\t\treturn registeredComps[id];\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} id\r\n\t * @returns {Phaser.Geom.Rectangle}\r\n\t */\r\n\tstatic getBoundsById(id) {\r\n\t\tconst proto = this.getById(id);\r\n\t\treturn proto ? proto.lockClipBounds : null;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} id\r\n\t * @returns {Phaser.GameObjects.GameObject|*}\r\n\t */\r\n\tstatic getClipById(id) {\r\n\t\tconst proto = this.getById(id);\r\n\t\treturn proto ? proto.lockClip : null;\r\n\t}\r\n\r\n}","/**\r\n * @namespace PhaserComps\r\n */\r\n\r\nimport ComponentClip from \"./clip/ComponentClip\";\r\nimport UIComponents from \"./components/UIComponents\";\r\nimport Plugin from \"./plugin/Plugin\";\r\nimport UIManager from \"./manager/UIManager\";\r\n\r\nconst PhaserComps = {\r\n\tComponentClip: ComponentClip,\r\n\tUIComponents: UIComponents,\r\n\tPlugin: Plugin,\r\n\tUIManager: UIManager\r\n};\r\n\r\nexport default PhaserComps;","import Phaser from \"phaser\";\r\n\r\nconst TYPE_IMAGE = \"image\";\r\nconst TYPE_COMPONENT = \"component\";\r\nconst TYPE_TEXT = \"text\";\r\nconst TYPE_TILE_SPRITE = \"tileSprite\";\r\nconst TYPE_POLYGON = \"polygon\";\r\nconst TYPE_ZONE = \"zone\";\r\n\r\n\r\n/**\r\n * @typedef {Object} PhaserComps.ComponentClip.StateConfig\r\n * Component state config object, generated by jsfl exporter\r\n * @memberOf PhaserComps.ComponentClip\r\n * @property {number} [x=0] x coordinate of component\r\n * @property {number} [y=0] y coordinate of component\r\n * @property {number} [scaleX=1] x scale of component\r\n * @property {number} [scaleY=1] y scale of component\r\n * @property {number} [angle=0] angle of component\r\n * @property {Number} [alpha=1] Opacity of component (`0` to `1`).\r\n */\r\n\r\n/**\r\n * @typedef {Object} PhaserComps.ComponentClip.ComponentConfig\r\n * @description\r\n * Component Config object, generated by jsfl exporter\r\n * @memberOf PhaserComps.ComponentClip\r\n * @property {String} type supported types are\r\n * `image`, `component`, `text`, `tileSprite`, `polygon`, `zone`\r\n * @property {Array<PhaserComps.ComponentClip.ComponentConfig>} [children] component children list\r\n * @property {String} [childId] unique component id, used by {@link StateManager}\r\n * @property {String} [key] key of component to find it with {@link UIComponentPrototype}.\r\n * Must be unique inside one state\r\n * @property {String} [image] Texture frame name. Only for component types `image` and `tileSprite`\r\n * @property {Phaser.GameObjects.TextStyle} [style] text style object, used only for `text` type\r\n * @property {Object<String, PhaserComps.ComponentClip.StateConfig>} [states] object keys are component ids to be enabled\r\n * at the specified state, and the StateConfig is position and scale params to setup for component\r\n * @property {Array<String>} masking List of component ids, that will be masked by this component.\r\n * Currently only polygon masks available.\r\n * @property {Number} [x=0] x coordinate of component\r\n * @property {Number} [y=0] y coordinate of component\r\n * @property {Number} [scaleX=1] x scale of component\r\n * @property {Number} [scaleY=1] y scale of component\r\n * @property {Number} [angle=0] angle of component in degrees\r\n * @property {Number} [alpha=1] Opacity of component (`0` to `1`).\r\n * @property {Number} [width] Component width.\r\n * only for `zone` type\r\n * @property {Number} [height] Component height.\r\n * only for `zone` type\r\n * @property {Array.<Number>} [vertices] Array of polygon vertices coords, `x` and `y` interleaving.\r\n * Only for `polygon` type\r\n * @property {int} [color] polygon color.\r\n * Only for `polygon` type\r\n */\r\n\r\n/**\r\n * @class ComponentClip\r\n * @memberOf PhaserComps\r\n * @classdesc\r\n * @extends Phaser.GameObjects.Container\r\n * Component clip is Phaser Container instance.\r\n * Builds itself with provided jsfl-generated config object.\r\n *\r\n * Clip supports state switching. Best if controlled by\r\n * [UIComponentPrototype]{@link PhaserComps.UIComponents.UIComponentPrototype} instance\r\n *\r\n * @see PhaserComps.UIComponents.UIComponentPrototype\r\n *\r\n * @param {Phaser.Scene} scene Phaser scene to create component at\r\n * @param {ComponentConfig} config jsfl-generated config object\r\n * @param {Array<String>|String} textures texure name or Array of texture names, where component should find its texture frames\r\n */\r\nexport default class ComponentClip extends Phaser.GameObjects.Container {\r\n\tconstructor(scene, config, textures) {\r\n\t\tsuper(scene, 0, 0);\r\n\t\tthis.childComponentClips = [];\r\n\r\n\t\t/**\r\n\t\t * component config object\r\n\t\t * @type {Object}\r\n\t\t * */\r\n\t\tthis._config = config;\r\n\r\n\t\t/**\r\n\t\t * component key\r\n\t\t * @type {String}\r\n\t\t */\r\n\t\tthis._key = config.key;\r\n\r\n\t\t/**\r\n\t\t * list of texture names to use in this component\r\n\t\t * @type {Array<String>}\r\n\t\t * */\r\n\t\tthis._textures = Array.isArray(textures) ? textures : [textures];\r\n\r\n\t\t/**\r\n\t\t * Texture frames to texture names map\r\n\t\t * @type {Object<String>}\r\n\t\t */\r\n\t\tthis.imageFramesMap = {};\r\n\r\n\t\t/**\r\n\t\t * Component's state manager instance. Helps to switch states and find active children by key\r\n\t\t * @type {StateManager}\r\n\t\t * */\r\n\t\tthis._stateManager = new StateManager(this, config);\r\n\r\n\t\tthis._childrenById = {};\r\n\r\n\t\tthis._createImagesMap(textures);\r\n\t\tthis._parseConfig();\r\n\t}\r\n\r\n\t/**\r\n\t * @public\r\n\t * @method PhaserComps.ComponentClip#getStateConfig\r\n\t * @description\r\n\t * Get raw state config object by state id, if exists\r\n\t * @param {String} stateId state id\r\n\t */\r\n\tgetStateConfig(stateId) {\r\n\t\treturn this._stateManager.getStateConfigById(stateId);\r\n\t}\r\n\r\n\t/**\r\n\t * @public\r\n\t * @method PhaserComps.ComponentClip#getStateIds\r\n\t * @description\r\n\t * Component state ids list.\r\n\t * @returns {Array<String>}\r\n\t */\r\n\tgetStateIds() {\r\n\t\treturn this._stateManager.stateIds;\r\n\t}\r\n\t/**\r\n\t * @public\r\n\t * @method PhaserComps.ComponentClip#setState\r\n\t * @description\r\n\t * Switch component view to specified stateId, if such stateId exists.\r\n\t * Do not use it manually, if you are using UIComponentPrototype to control the view\r\n\t *\r\n\t * @param {String} stateId state id to switch to\r\n\t * @param {Boolean} [force=false] if true, state will be setup again even if stateId was not changed\r\n\t */\r\n\tsetState(stateId, force) {\r\n\t\tthis._stateManager.setState(stateId, force);\r\n\t}\r\n\r\n\t/**\r\n\t * @public\r\n\t * @method PhaserComps.ComponentClip#applyChildParams\r\n\t * @description\r\n\t * Apply child params\r\n\t * @param {String} childId\r\n\t * @param {StateConfig} params\r\n\t */\r\n\tapplyChildParams(childId, params) {\r\n\t\tif (!this._childrenById.hasOwnProperty(childId)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tComponentClip._setupCommonParams(this._childrenById[childId], params);\r\n\t}\r\n\r\n\t/**\r\n\t * @public\r\n\t * @method PhaserComps.ComponentClip#getChildClip\r\n\t * @description returns current active component child view instance\r\n\t * @param {String} key child key\r\n\t * @returns {PhaserComps.ComponentClip|Phaser.GameObjects.GameObject}\r\n\t */\r\n\tgetChildClip(key) {\r\n\t\treturn this._stateManager.getActiveComponentByKey(key);\r\n\t}\r\n\r\n\t/**\r\n\t * @public\r\n\t * @method PhaserComps.ComponentClip#getChildText\r\n\t * @description returns current active component child text instance\r\n\t * @param {String} key child text field key\r\n\t * @returns {Phaser.GameObjects.Text}\r\n\t */\r\n\tgetChildText(key) {\r\n\t\t// TODO separate getter\r\n\t\treturn this._stateManager.getActiveComponentByKey(key);\r\n\t}\r\n\r\n\t/**\r\n\t * @public\r\n\t * @method PhaserComps.ComponentClip#destroy\r\n\t * @description destroy all child GameObjects and child clips recursively\r\n\t * @param {Boolean} [fromScene=false]\r\n\t */\r\n\tdestroy(fromScene) {\r\n\t\tfor (let child of this.childComponentClips) {\r\n\t\t\tchild.destroy(fromScene);\r\n\t\t}\r\n\t\tsuper.destroy(fromScene)\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.ComponentClip#_createImagesMap\r\n\t * @description\r\n\t * Fill the imageFramesMap object from provided textures.\r\n\t * imageFramesMap used to\r\n\t * @param {Array<String>} textures\r\n\t * @private\r\n\t * @ignore\r\n\t */\r\n\t_createImagesMap(textures) {\r\n\t\tfor (let textureName of textures) {\r\n\t\t\tconst texture = this.scene.textures.get(textureName);\r\n\t\t\tif (!texture) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst frames = texture.getFrameNames();\r\n\t\t\tfor (let frameName of frames) {\r\n\t\t\t\tthis.imageFramesMap[frameName] = textureName;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.ComponentClip#_parseConfig\r\n\t * @description\r\n\t * Builds component from config\r\n\t * @private\r\n\t * @ignore\r\n\t */\r\n\t_parseConfig() {\r\n\t\t//ComponentView._setupCommonParams(this, this._config);\r\n\t\tif (this._config.hasOwnProperty(\"children\")) {\r\n\t\t\tfor (let childConfig of this._config.children) {\r\n\t\t\t\tthis._createChildFromConfig(childConfig);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.ComponentClip#_createChildFromConfig\r\n\t * @description creates child instance, depending on its type, add it to state manager\r\n\t * @param {ComponentConfig} config child component config object\r\n\t * @private\r\n\t * @ignore\r\n\t */\r\n\t_createChildFromConfig(config) {\r\n\t\tlet child = null;\r\n\t\tlet childId = config.childId;\r\n\t\tlet childKey = config.key;\r\n\t\tlet addAsChild = true;\r\n\t\tif (config.type === TYPE_IMAGE) {\r\n\t\t\tchild = this._createImageFromConfig(config);\r\n\t\t} else if (config.type === TYPE_TEXT) {\r\n\t\t\tchild = this._createTextFromConfig(config);\r\n\t\t} else if (config.type === TYPE_TILE_SPRITE) {\r\n\t\t\tchild = this._createTileSpriteFromConfig(config);\r\n\t\t} else if (config.type === TYPE_COMPONENT) {\r\n\t\t\tchild = new ComponentClip(this.scene, config, this._textures);\r\n\t\t\tComponentClip._setupCommonParams(child, config);\r\n\t\t} else if (config.type === TYPE_ZONE) {\r\n\t\t\tchild = this._createHitZoneFromConfig(config);\r\n\t\t} else if (config.type === TYPE_POLYGON) {\r\n\t\t\tchild = this._createPolygonFromConfig(config);\r\n\t\t\tif (config.hasOwnProperty(\"masking\")) {\r\n\t\t\t\tlet mask = child.createGeometryMask();\r\n\t\t\t\tfor (let maskedChildId of config.masking) {\r\n\t\t\t\t\tlet maskedChild = this._childrenById[maskedChildId];\r\n\t\t\t\t\tmaskedChild.setMask(mask);\r\n\t\t\t\t}\r\n\t\t\t\taddAsChild = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (child === null) {\r\n\t\t\t//console.warn(\"unknown component type\", config.type, config);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t//ComponentView._setupCommonParams(child, config);\r\n\t\tthis._childrenById[childId] = child;\r\n\t\tthis.childComponentClips.push(child);\r\n\t\tif (addAsChild) {\r\n\t\t\tthis.add(child);\r\n\t\t}\r\n\t\tthis._stateManager.addComponent(child, childId, childKey);\r\n\t}\r\n\r\n\t/**\r\n\t * @description Create simple polygon with provided vertices from config\r\n\t * @method PhaserComps.ComponentClip#_createPolygonFromConfig\r\n\t * @param {PhaserComps.ComponentClip.ComponentConfig} config\r\n\t * @returns {Phaser.GameObjects.Graphics}\r\n\t * @private\r\n\t * @ignore\r\n\t */\r\n\t_createPolygonFromConfig(config) {\r\n\t\tconst shape = this.scene.make.graphics();\r\n\t\tshape.fillStyle(config.color, config.hasOwnProperty(\"alpha\") ? config.alpha : 1);\r\n\t\tshape.beginPath();\r\n\t\tlet vertices = config.vertices;\r\n\t\tlet verticesLength = vertices.length;\r\n\t\tfor (let i = 0; i < verticesLength; i += 2) {\r\n\t\t\tshape.lineTo(vertices[i], vertices[i + 1]);\r\n\t\t}\r\n\t\tshape.closePath();\r\n\t\tshape.fillPath();\r\n\t\tComponentClip._setupCommonParams(shape, config);\r\n\t\tif (!config.hasOwnProperty(\"masking\")) {\r\n\t\t\tthis.scene.add.existing(shape);\r\n\t\t}\r\n\t\treturn shape;\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.ComponentClip#_createTileSpriteFromConfig\r\n\t * @description creates Phaser.GameObjects.TileSprite by jsfl-generated config and returns it\r\n\t * @param {Object} config jsfl-generated TileSprite config object\r\n\t * @returns {Phaser.GameObjects.TileSprite}\r\n\t * @private\r\n\t * @ignore\r\n\t */\r\n\t_createTileSpriteFromConfig(config) {\r\n\t\tconst sprite = this.scene.add.tileSprite(\r\n\t\t\t0, 0,\r\n\t\t\tconfig.width, config.height,\r\n\t\t\tthis.imageFramesMap[config.image],\r\n\t\t\tconfig.image\r\n\t\t);\r\n\t\tsprite.setOrigin(0.5, 0.5); // Animate places shape coords to center\r\n\t\tComponentClip._setupCommonParams(sprite, config);\r\n\t\treturn sprite;\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.ComponentClip#_createImageFromConfig\r\n\t * @description creates Phaser.GameObjects.Image instance by jsfl-generated config and returns it\r\n\t * @param {Object} config jsfl-generated Image config object\r\n\t * @returns {Phaser.GameObjects.Image}\r\n\t * @private\r\n\t * @ignore\r\n\t */\r\n\t_createImageFromConfig(config) {\r\n\t\tconst image = this.scene.add.image(\r\n\t\t\t0, 0,\r\n\t\t\tthis.imageFramesMap[config.image],\r\n\t\t\tconfig.image\r\n\t\t);\r\n\t\timage.setOrigin(0);\r\n\t\tComponentClip._setupCommonParams(image, config);\r\n\t\treturn image;\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.ComponentClip#_createTextFromConfig\r\n\t * @description creates Phaser.GameObjects.Text instance by jsfl-generated config and returns it\r\n\t * @param {Object} config jsfl-generated Text config object\r\n\t * @returns {Phaser.GameObjects.Text}\r\n\t * @private\r\n\t * @ignore\r\n\t */\r\n\t_createTextFromConfig(config) {\r\n\t\tconst text = this.scene.add.text(0, 0, config.text, config.textStyle);\r\n\t\tif (config.textStyle.align === \"center\") {\r\n\t\t\ttext.setOrigin(0.5, 0);\r\n\t\t} else if (config.textStyle.align === \"right\") {\r\n\t\t\ttext.setOrigin(1, 0);\r\n\t\t} else {\r\n\t\t\ttext.setOrigin(0);\r\n\t\t}\r\n\t\tComponentClip._setupCommonParams(text, config);\r\n\t\treturn text;\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.ComponentClip#_createHitZoneFromConfig\r\n\t * @description creates Phaser.GameObjects.Zone instance by jsfl-generated config and returns it\r\n\t * @param {Object} config jsfl-generated Zone config object\r\n\t * @return {Phaser.GameObjects.Zone}\r\n\t * @private\r\n\t * @ignore\r\n\t */\r\n\t_createHitZoneFromConfig(config) {\r\n\t\treturn this.scene.add.zone(\r\n\t\t\tconfig.x || 0,\r\n\t\t\tconfig.y || 0,\r\n\t\t\tconfig.width,\r\n\t\t\tconfig.height\r\n\t\t).setOrigin(0);\r\n\t}\r\n\r\n\t/**\r\n\t * @memberOf ComponentClip\r\n\t * @description setup common game object params from jsfl-generated config\r\n\t * @param {*} component\r\n\t * @param {Object} config\r\n\t * @ignore\r\n\t */\r\n\tstatic _setupCommonParams(component, config) {\r\n\t\tlet x = config.x || 0;\r\n\t\tlet y = config.y || 0;\r\n\t\tlet scaleX = config.scaleX || 1;\r\n\t\tlet scaleY = config.scaleY || 1;\r\n\t\tlet angle = config.angle || 0;\r\n\t\tlet alpha = config.hasOwnProperty(\"alpha\") ? config.alpha : 1;\r\n\t\tcomponent.x = x;\r\n\t\tcomponent.y = y;\r\n\t\tcomponent.scaleX = scaleX;\r\n\t\tcomponent.scaleY = scaleY;\r\n\t\tcomponent.angle = angle;\r\n\t\tcomponent.alpha = alpha;\r\n\t}\r\n}\r\n\r\nclass State {\r\n\t/**\r\n\t * @class State\r\n\t * @classdesc State config decorator, for\r\n\t * [StateManager]{@link PhaserComps.ComponentClip.StateManager} internal use only\r\n\t * @param {PhaserComps.ComponentClip.StateConfig} config\r\n\t * @memberOf PhaserComps.ComponentClip\r\n\t */\r\n\tconstructor(config) {\r\n\t\t/**\r\n\t\t * State config object\r\n\t\t * @type {PhaserComps.ComponentClip.StateConfig}\r\n\t\t */\r\n\t\tthis.config = config;\r\n\t\t/**\r\n\t\t * Component ids, that are only active in this state\r\n\t\t * @type {Array<String>}\r\n\t\t */\r\n\t\tthis.componentIds = [];\r\n\t\tthis.componentIds = Object.keys(config);\r\n\t\t/*for (let componentId in config) {\r\n\t\t\tthis.componentIds.push(componentId);\r\n\t\t}*/\r\n\t}\r\n}\r\n\r\nclass StateManager {\r\n\t/**\r\n\t * @class StateManager\r\n\t * @memberOf PhaserComps.ComponentClip\r\n\t * @classdesc\r\n\t * For [ComponentClip]{@link PhaserComps.ComponentClip}\r\n\t * internal use only\r\n\t *\r\n\t * Shows or hides component view instances depending on which state is active.\r\n\t * Helps to get current active components by keys.\r\n\t *\r\n\t * @param {PhaserComps.ComponentClip} clip state manager creator clip instance\r\n\t * @param {Object} config Main component states config object\r\n\t *\r\n\t */\r\n\tconstructor(clip, config) {\r\n\t\t/**\r\n\t\t *\r\n\t\t * @type {PhaserComps.ComponentClip}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._clip = clip;\r\n\r\n\t\t/**\r\n\t\t *\r\n\t\t * @type {Array<String>}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._dynamicChildrenIds = [];\r\n\r\n\t\t/**\r\n\t\t *\r\n\t\t * @type {Object<State>}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._states = {};\r\n\r\n\t\t/**\r\n\t\t * State ids array\r\n\t\t * @type {Array<String>}\r\n\t\t */\r\n\t\tthis.stateIds = [];\r\n\r\n\t\t/**\r\n\t\t *\r\n\t\t * @type {Object}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._components = {};\r\n\r\n\t\t/**\r\n\t\t *\r\n\t\t * @type {State}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._currentState = null;\r\n\r\n\t\t/**\r\n\t\t *\r\n\t\t * @type {String}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis._currentStateId = null;\r\n\t\t/**\r\n\t\t *\r\n\t\t * @type {Object<String>}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._componentKeys = {};\r\n\r\n\t\tthis._residentComponentsByKey = {};\r\n\t\tlet idsArray = [];\r\n\t\tfor (let stateId in config.states) {\r\n\t\t\tthis.stateIds.push(stateId);\r\n\t\t\tlet state = new State(config.states[stateId]);\r\n\t\t\tthis._states[stateId] = state;\r\n\t\t\tidsArray.push(...state.componentIds);\r\n\t\t}\r\n\t\tconst uniq = []\r\n\t\tfor (let id of idsArray) {\r\n\t\t\tif (!uniq.includes(id)) {\r\n\t\t\t\tuniq.push(id);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._dynamicChildrenIds = uniq;\r\n\t}\r\n\r\n\t/**\r\n\t * @public\r\n\t * @method PhaserComps.ComponentClip.StateManager#getStateConfigById\r\n\t * @description\r\n\t * Get raw state config object by state id\r\n\t * @param {String} stateId state id\r\n\t */\r\n\tgetStateConfigById(stateId) {\r\n\t\tif (!this._states.hasOwnProperty(stateId)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn this._states[stateId].config;\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.ComponentClip.StateManager#addComponent\r\n\t * @param {PhaserComps.ComponentClip|Phaser.GameObjects.GameObject} component\r\n\t * component view instance, it may be text, image, sprite, or ComponentView instance\r\n\t * @param {String} childId unique child id from component config\r\n\t * @param {String} [childKey] child key from component config\r\n\t */\r\n\taddComponent(component, childId, childKey) {\r\n\r\n\t\tif (!this._dynamicChildrenIds.includes(childId)) {\r\n\t\t\tif (typeof childKey !== \"undefined\") {\r\n\t\t\t\tthis._residentComponentsByKey[childKey] = component;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis._components[childId] = component;\r\n\t\t\tif (typeof childKey !== \"undefined\") {\r\n\t\t\t\tthis._componentKeys[childId] = childKey;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Setup state with provided stateId, if exists\r\n\t * @method PhaserComps.ComponentClip.StateManager#setState\r\n\t * @param {String} stateId state id to setup\r\n\t * @param {Boolean} force if true, update state even if stateId was not changed\r\n\t */\r\n\tsetState(stateId, force) {\r\n\t\tif (this._currentStateId === stateId && !force) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!this._states.hasOwnProperty(stateId)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._currentStateId = stateId;\r\n\t\tthis._currentState = this._states[stateId];\r\n\t\tthis.setupState();\r\n\t}\r\n\r\n\t/**\r\n\t * Get component with provided key, if exists and is present in current state\r\n\t * @method PhaserComps.ComponentClip.StateManager#getActiveComponentByKey\r\n\t * @param {String} key Component key to get\r\n\t * @returns {ComponentClip|Phaser.GameObjects.Image|Phaser.GameObjects.TileSprite|Phaser.GameObjects.Text|null}\r\n\t */\r\n\tgetActiveComponentByKey(key) {\r\n\t\tif (this._residentComponentsByKey.hasOwnProperty(key)) {\r\n\t\t\treturn this._residentComponentsByKey[key];\r\n\t\t}\r\n\t\tif (this._currentState === null) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tfor (let i in this._currentState.componentIds) {\r\n\t\t\tlet id = this._currentState.componentIds[i];\r\n\t\t\tif (this._componentKeys[id] === key) {\r\n\t\t\t\treturn this._components[id];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\t/**\r\n\t * Show state components, apply its' state positions, and hide non-state components\r\n\t * @method PhaserComps.ComponentClip.tateManager#setupState\r\n\t * @protected\r\n\t */\r\n\tsetupState() {\r\n\t\tlet idsToShow = this._currentState.componentIds;\r\n\t\tfor (let id of this._dynamicChildrenIds) {\r\n\t\t\tlet component = this._components[id];\r\n\t\t\tif (idsToShow.includes(id)) {\r\n\t\t\t\tcomponent.visible = true;\r\n\t\t\t\tComponentClip._setupCommonParams(component, this._currentState.config[id]);\r\n\t\t\t} else {\r\n\t\t\t\tcomponent.visible = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","import UIButton from \"./UIButton\";\r\n\r\n/**\r\n * @class UIButtonSelect\r\n * @memberOf PhaserComps.UIComponents\r\n * @classdesc\r\n * Checkbox-like button component prototype.\r\n * Has states `up`, `over`, `down`, `disable`, `up_select`, `over_select`, `down_select`, `disable_select`,\r\n * Emits EVENT_CLICK on click.\r\n * When disabled, doesn't interact to mouse events and move to state `disable`\r\n * @extends PhaserComps.UIComponents.UIButton\r\n * @emits PhaserComps.UIComponents.UIButton.EVENT_CLICK\r\n *\r\n * @property {Boolean} enable activate/deactivate button interaction. if false, button state is set to `disable`\r\n * @property {String} label get/set button label text\r\n * @property {Boolean} select get/set switch\r\n *\r\n * @param {PhaserComps.UIComponents.UIComponentPrototype} [parent] UIComponentPrototype instance to find clip inside\r\n * @param {String} [key] key to find clip inside parent\r\n * @param {String} [labelText] text to set for a 'label' key\r\n */\r\nexport default class UIButtonSelect extends UIButton {\r\n\r\n\tconstructor(parent, key, labelText){\r\n\t\tsuper(parent, key, labelText);\r\n\r\n\t\t/**\r\n\t\t * button as selected or not\r\n\t\t * @type {Boolean}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._select = false;\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.UIComponents.UIButtonSelect#getStateId\r\n\t * @inheritDoc\r\n\t * @returns {String}\r\n\t */\r\n\tgetStateId() {\r\n\t\treturn super.getStateId() + (this._select ? \"_select\" : \"\");\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.UIComponents.UIButtonSelect#_onClick\r\n\t * @inheritDoc\r\n\t */\r\n\t_onClick() {\r\n\t\tthis._select = !this._select;\r\n\t\tthis.doState();\r\n\t\tsuper._onClick();\r\n\t}\r\n\r\n\tget select() { return this._select; }\r\n\tset select(value) {\r\n\t\tif (this._select === value) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._select = value;\r\n\t\tthis.doState();\r\n\t}\r\n}","import UIButton from \"./UIButton\";\r\nimport UIManager from \"../manager/UIManager\";\r\nconst _EVENT_DRAG = \"event_drag\";\r\n\r\n/**\r\n * @typedef DragBounds\r\n * @memberOf PhaserComps.UIComponents.UIButtonDraggable\r\n * @property {Number} minX left drag bound\r\n * @property {Number} minY top drag bound\r\n * @property {Number} maxX right drag bound\r\n * @property {Number} maxY bottom drag bound\r\n */\r\n\r\n/**\r\n * @class UIButtonDraggable\r\n * @memberOf PhaserComps.UIComponents\r\n * @classdesc\r\n * Same as {@link UIComponents.UIButton}, but also emits EVENT_DRAG with two arguments, horizontal and vertical movement delta\r\n *\r\n * @extends UIComponents.UIButton\r\n * @emits EVENT_CLICK,\r\n * @emits EVENT_DRAG,\r\n *\r\n * @property {Boolean} enable activate/deactivate button interaction. if false, button state is set to `disable`\r\n * @property {String} label get/set button label text\r\n *\r\n * @param {PhaserComps.UIComponents.UIComponentPrototype} [parent] UIComponentPrototype instance to find clip inside\r\n * @param {String} [key] key to find clip inside parent\r\n * @param {String} [labelText] text to set for a 'label' key\r\n */\r\n\r\nexport default class UIButtonDraggable extends UIButton {\r\n\r\n\t/**\r\n\t * @event PhaserComps.UIComponents.UIButtonDraggable.EVENT_DRAG\r\n\t * @memberOf PhaserComps.UIComponents.UIButtonDraggable\r\n\t * @description\r\n\t * Emitted on drag move.\r\n\t * @param {Number} x horizontal drag movement (from drag start)\r\n\t * @param {Number} y vertical drag movement (from drag start)\r\n\t */\r\n\tstatic get EVENT_DRAG() { return _EVENT_DRAG; }\r\n\r\n\tconstructor(parent, key, labelText) {\r\n\t\tsuper(parent, key, labelText);\r\n\t\t/**\r\n\t\t *\r\n\t\t * @type DragBounds\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._dragBounds = {\r\n\t\t\tminX: 0,\r\n\t\t\tmaxX: 0,\r\n\t\t\tminY: 0,\r\n\t\t\tmaxY: 0\r\n\t\t};\r\n\t\t/**\r\n\t\t *\r\n\t\t * @type {number}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._startDragX = 0;\r\n\t\t/**\r\n\t\t *\r\n\t\t * @type {number}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._startDragY = 0;\r\n\t\t/**\r\n\t\t *\r\n\t\t * @type {Phaser.GameObjects.Zone}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._dragZone = null;\r\n\t}\r\n\r\n\t/**\r\n\t * Set clip drag bounds\r\n\t * @method PhaserComps.UIComponents.UIButtonDraggable#setDragBounds\r\n\t * @param {Number} minX left drag bound\r\n\t * @param {Number} minY top drag bound\r\n\t * @param {Number} maxX right drag bound\r\n\t * @param {Number} maxY bottom drag bound\r\n\t */\r\n\tsetDragBounds(minX, minY, maxX, maxY) {\r\n\t\tthis._dragBounds.minX = minX;\r\n\t\tthis._dragBounds.maxX = maxX;\r\n\t\tthis._dragBounds.minY = minY;\r\n\t\tthis._dragBounds.maxY = maxY;\r\n\t}\r\n\r\n\t/**\r\n\t * _dragZone `dragstart` event callback\r\n\t * @method PhaserComps.UIComponents.UIButtonDraggable#_onDragStart\r\n\t * @param pointer\r\n\t * @param {Phaser.GameObjects.GameObject} gameObject\r\n\t * @protected\r\n\t */\r\n\t_onDragStart(pointer, gameObject) {\r\n\t\tif (!this._dragZone || this._dragZone !== gameObject) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!this._clip) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._startDragX = this._clip.x - gameObject.input.dragStartX;\r\n\t\tthis._startDragY = this._clip.y - gameObject.input.dragStartY;\r\n\t}\r\n\r\n\t/**\r\n\t * _dragZone `drag` event callback\r\n\t * @method PhaserComps.UIComponents.UIButtonDraggable#_onDrag\r\n\t * @param pointer\r\n\t * @param {Phaser.GameObjects.GameObject} gameObject\r\n\t * @param {Number} dragX\r\n\t * @param {Number} dragY\r\n\t * @protected\r\n\t */\r\n\t_onDrag(pointer, gameObject, dragX, dragY) {\r\n\t\tif (!UIManager.check(this.lockId)){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!this._dragZone\t|| this._dragZone !== gameObject || this.clip) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet newX = this._startDragX + dragX;\r\n\t\tlet newY = this._startDragY + dragY;\r\n\t\tif (newX < this._dragBounds.minX) {\r\n\t\t\tnewX = this._dragBounds.minX;\r\n\t\t} else if (newX > this._dragBounds.maxX) {\r\n\t\t\tnewX = this._dragBounds.maxX;\r\n\t\t}\r\n\r\n\t\tif (newY < this._dragBounds.minY) {\r\n\t\t\tnewY = this._dragBounds.minY;\r\n\t\t} else if (newY > this._dragBounds.maxY) {\r\n\t\t\tnewY = this._dragBounds.maxY;\r\n\t\t}\r\n\t\tthis.emit(_EVENT_DRAG, newX, newY);\r\n\t}\r\n\r\n\t_setupInteractive(zone) {\r\n\t\tsuper._setupInteractive(zone);\r\n\t\tthis._dragZone = zone;\r\n\t\t//zone.scene.input.dragDistanceThreshold = 3;\r\n\t\tzone.scene.input.setDraggable(zone, true);\r\n\t\tzone.scene.input.on(\"dragstart\", this._onDragStart, this);\r\n\t\tzone.scene.input.on(\"drag\", this._onDrag, this);\r\n\t}\r\n\r\n\t_removeInteractive(zone) {\r\n\t\tsuper._removeInteractive(zone);\r\n\t\tthis._dragZone = null;\r\n\t\tzone.scene.input.setDraggable(zone, false);\r\n\t\tzone.scene.input.removeListener(\"dragstart\", this._onDragStart);\r\n\t\tzone.scene.input.removeListener(\"drag\", this._onDrag);\r\n\t}\r\n\r\n}","import UIComponentPrototype from \"./UIComponentPrototype\";\r\nimport UIButton from \"./UIButton\";\r\nimport UIButtonDraggable from \"./UIButtonDraggable\";\r\nimport UIManager from \"../manager/UIManager\";\r\n\r\nconst _EVENT_CHANGE = \"event_change\";\r\n\r\n/**\r\n * @class UIScrollBar\r\n * @memberOf PhaserComps.UIComponents\r\n * @classdesc\r\n * Scroll bar component. can be vertical or horizontal <br>\r\n * It have up and down buttons inside, draggable thumb button. <br>\r\n * `DIMENSIONS` zone defines thumb drag bounds.\r\n *\r\n * default value range is 0 to 1, You can change it by setting\r\n * min and max value. Also you can set value step, so value will always\r\n * be stepped by it\r\n *\r\n * @emits PhaserComps.UIComponents.UIScrollBar.EVENT_CHANGE\r\n * @property {Number} value current bar value, from min value to max, default is from 0 to 1\r\n *\r\n * @param {PhaserComps.UIComponents.UIComponentPrototype} [parent] UIComponentPrototype instance to find clip inside\r\n * @param {String} [key] key to find clip inside parent\r\n * @param {Boolean} [vertical=false] scroll bar behave like vertical or horizontal\r\n */\r\n\r\nexport default class UIScrollBar extends UIComponentPrototype {\r\n\r\n\t/**\r\n\t * @event PhaserComps.UIComponents.UIScrollBar.EVENT_CHANGE\r\n\t * @memberOf PhaserComps.UIComponents.UIScrollBar\r\n\t * @description\r\n\t * Emitted on scroll bar value change.\r\n\t * @param {Number} value current scrollbar value\r\n\t */\r\n\tstatic get EVENT_CHANGE() { return _EVENT_CHANGE; }\r\n\r\n\tconstructor(parent, key, vertical) {\r\n\t\tsuper(parent, key);\r\n\t\tthis._vertical = vertical || false;\r\n\r\n\t\t/**\r\n\t\t *\r\n\t\t * @type {number}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._value = 0;\r\n\t\t/**\r\n\t\t *\r\n\t\t * @type {number}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._minValue = 0;\r\n\t\t/**\r\n\t\t *\r\n\t\t * @type {number}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._maxValue = 1;\r\n\t\t/**\r\n\t\t *\r\n\t\t * @type {number}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._valueStep = 0;\r\n\t\t/**\r\n\t\t *\r\n\t\t * @type {number}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._buttonStep = 0.1;\r\n\r\n\t\t/**\r\n\t\t * scroll up/left button\r\n\t\t * @type {PhaserComps.UIComponents.UIButton}\r\n\t\t */\r\n\t\tthis.btnPrev = new UIButton(this, \"btn_up\");\r\n\t\tthis.btnPrev.on(UIButton.EVENT_CLICK, this.onPrevClick, this);\r\n\t\t/**\r\n\t\t * scroll down/right button\r\n\t\t * @type {PhaserComps.UIComponents.UIButton}\r\n\t\t */\r\n\t\tthis.btnNext = new UIButton(this, \"btn_down\");\r\n\t\tthis.btnNext.on(UIButton.EVENT_CLICK, this.onNextClick, this);\r\n\r\n\t\t/**\r\n\t\t *\r\n\t\t * @type {PhaserComps.UIComponents.UIButtonDraggable}\r\n\t\t */\r\n\t\tthis.thumb = new UIButtonDraggable(this, \"thumb\");\r\n\t\tthis.thumb.on(UIButtonDraggable.EVENT_DRAG, this._onThumbDrag, this);\r\n\r\n\t\t/**\r\n\t\t *\r\n\t\t * @type {number}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._trackStart = 0;\r\n\t\t/**\r\n\t\t *\r\n\t\t * @type {number}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._trackLength = 100;\r\n\r\n\t\t/**\r\n\t\t *\r\n\t\t * @type {PhaserComps.ComponentClip}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._thumbClip = null;\r\n\t}\r\n\r\n\t/**\r\n\t * Setup scroll bar value bounds and value step\r\n\t * @method PhaserComps.UIComponents.UIScrollBar#setValueBounds\r\n\t * @param {Number} minValue minimum value\r\n\t * @param {Number} maxValue maximum value\r\n\t * @param {Number} [valueStep=0] value change step\r\n\t */\r\n\tsetValueBounds(minValue, maxValue, valueStep) {\r\n\t\tthis._minValue = minValue;\r\n\t\tthis._maxValue = maxValue;\r\n\t\tif (typeof valueStep !== \"undefined\") {\r\n\t\t\tthis._valueStep = valueStep;\r\n\t\t\tif (this._buttonStep < valueStep) {\r\n\t\t\t\tthis._buttonStep = valueStep;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis._valueStep = 0;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.UIComponents.UIScrollBar#setButtonStep\r\n\t * @param {Number} val\r\n\t */\r\n\tsetButtonStep(val) {\r\n\t\tthis._buttonStep = val;\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.UIComponents.UIScrollBar#onClipAppend\r\n\t * @inheritDoc\r\n\t */\r\n\tonClipAppend(clip) {\r\n\t\tsuper.onClipAppend(clip);\r\n\t\tthis._updateClips();\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.UIComponents.UIScrollBar#_updateClips\r\n\t * @private\r\n\t */\r\n\t_updateClips() {\r\n\t\tif (!this._clip) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._thumbClip = this.thumb._clip;\r\n\t\tlet trackClip = this._clip.getChildClip(\"DIMENSIONS\");\r\n\t\tif (trackClip) {\r\n\t\t\tthis._trackStart = this._vertical ? trackClip.y : trackClip.x;\r\n\t\t\tthis._trackLength = this._vertical ? trackClip.height : trackClip.width;\r\n\r\n\t\t\tif (this._thumbClip) {\r\n\t\t\t\tthis.thumb.setDragBounds(\r\n\t\t\t\t\tthis._vertical ? this._thumbClip.x : trackClip.x,\r\n\t\t\t\t\tthis._vertical ? trackClip.y : this._thumbClip.y,\r\n\t\t\t\t\tthis._vertical ? this._thumbClip.x : trackClip.x + trackClip.width,\r\n\t\t\t\t\tthis._vertical ? trackClip.y + trackClip.height : this._thumbClip.y\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet hitZone = this._clip.getChildClip(\"HIT_ZONE\");\r\n\t\tif (hitZone) {\r\n\t\t\thitZone.on(\"pointerdown\", this._onZoneDown, this);\r\n\t\t\t//hitZone.on(\"pointerup\", this.onZoneUp, this);\r\n\t\t}\r\n\t\tthis._updateThumbFromValue();\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.UIComponents.UIScrollBar#onClipProcess\r\n\t * @inheritDoc\r\n\t */\r\n\tonClipProcess() {\r\n\t\tsuper.onClipProcess();\r\n\t\tif (!this.thumb) {// call from super constructor\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._updateClips();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.UIComponents.UIScrollBar#onPrevClick\r\n\t * @protected\r\n\t */\r\n\tonPrevClick() {\r\n\t\tif (!UIManager.check(this.lockId)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.value -= this._buttonStep;\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.UIComponents.UIScrollBar#onNextClick\r\n\t * @protected\r\n\t */\r\n\tonNextClick() {\r\n\t\tif (!UIManager.check(this.lockId)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.value += this._buttonStep;\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.UIComponents.UIScrollBar#_updateThumbFromValue\r\n\t * @private\r\n\t */\r\n\t_updateThumbFromValue() {\r\n\t\tif (!this._thumbClip) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet barPosition = Math.round(this._trackStart + this._trackLength * this._value);\r\n\t\tif (this._vertical) {\r\n\t\t\tthis._thumbClip.y = barPosition;\r\n\t\t} else {\r\n\t\t\tthis._thumbClip.x = barPosition;\r\n\t\t}\r\n\t\tthis.emit(_EVENT_CHANGE, this.value);\r\n\t}\r\n\r\n\tget value() {\r\n\t\tlet v = this._value * (this._maxValue - this._minValue);\r\n\t\tif (this._valueStep === 0) {\r\n\t\t\treturn v + this._minValue;\r\n\t\t}\r\n\t\tv = Math.round(v / this._valueStep) * this._valueStep;\r\n\t\treturn v + this._minValue;\r\n\t}\r\n\r\n\tset value(val) {\r\n\t\tlet v = (val - this._minValue) / (this._maxValue - this._minValue);\r\n\t\tif (v < 0) v = 0;\r\n\t\tif (v > 1) v = 1;\r\n\t\tif (v === this._value) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._value = v;\r\n\t\tthis._updateThumbFromValue();\r\n\t}\r\n\r\n\t/**\r\n\t * Thumb button drag move handler\r\n\t * @param {Number} positionX\r\n\t * @param {Number} positionY\r\n\t * @private\r\n\t */\r\n\t_onThumbDrag(positionX, positionY) {\r\n\t\tif (this._trackLength === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!UIManager.check(this.lockId)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet barPosition = this._vertical ? positionY : positionX;\r\n\t\tlet newValue = (barPosition - this._trackStart) / this._trackLength;\r\n\t\tlet v = newValue * (this._maxValue - this._minValue);\r\n\t\tif (this._valueStep !== 0) {\r\n\t\t\tv = Math.round(v / this._valueStep) * this._valueStep;\r\n\t\t}\r\n\t\t// minValue added only after step normalization\r\n\t\tthis.value = v + this._minValue;\r\n\t}\r\n\r\n\t/**\r\n\t * Zone around scrollbar thumb click handler\r\n\t * @method PhaserComps.UIComponents.UIScrollBar#_onZoneDown\r\n\t */\r\n\t_onZoneDown() {\r\n\t\t// TODO\r\n\t}\r\n}","import UIComponentPrototype from \"./UIComponentPrototype\";\r\n\r\nconst EVENT_ITEM_CHANGE = \"event_change\";\r\n\r\n/**\r\n * @class UIList\r\n * @memberOf PhaserComps.UIComponents\r\n * @classdesc\r\n *\r\n * List component. Item clip instances are supposed to exist as it's children, with keys `item_0`, `item_1` and so on.\r\n *\r\n * When data array applied, every array item is applied to its' view instance\r\n *\r\n * Useful for short lists, and for lists with custom items layout.\r\n *\r\n * @emits PhaserComps.UIComponents.UIList.EVENT_ITEM_CHANGE\r\n * @property {Array<*>} data any data array to apply to list items\r\n *\r\n * @param {PhaserComps.UIComponents.UIComponentPrototype} [parent] UIComponentPrototype instance to find clip inside\r\n * @param {String} [key] key to find clip inside parent\r\n * @param {Class} rendererClass class for items, best if extending `UIListBaseItem`\r\n */\r\n\r\n\r\nexport default class UIList extends UIComponentPrototype {\r\n\r\n\t/**\r\n\t * @event PhaserComps.UIComponents.UIList.EVENT_ITEM_CHANGE\r\n\t * @memberOf PhaserComps.UIComponents.UIList\r\n\t * @description\r\n\t * Emitted when any item emits such even.\r\n\t * @param {PhaserComps.UIComponents.UIListBaseItem} item item instance, that emitted change event\r\n\t */\r\n\tstatic get EVENT_ITEM_CHANGE() { return EVENT_ITEM_CHANGE; }\r\n\r\n\tconstructor(parent, key, rendererClass) {\r\n\t\tsuper(parent, key);\r\n\t\tthis._rendererClass = rendererClass;\r\n\t\tthis._items = [];\r\n\t}\r\n\r\n\t/**@return {*[]}*/\r\n\tget data() {\r\n\t\treturn this._data;\r\n\t}\r\n\r\n\t/** @param {*[]} value */\r\n\tset data(value) {\r\n\t\tthis._data = value;\r\n\t\tthis._updateData();\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.UIComponents.UIList#clean\r\n\t * @desc Destroy all items renderer instances\r\n\t */\r\n\tclean() {\r\n\t\twhile(this._items.length !== 0) {\r\n\t\t\tlet item = this._items.pop();\r\n\t\t\titem.destroy(true);\r\n\t\t}\r\n\t}\r\n\r\n\t_updateData() {\r\n\t\tconst len = this._data.length;\r\n\t\tfor (let index = 0; index < len; index++) {\r\n\t\t\tlet dataItem = this._data[index];\r\n\t\t\tlet item = this._getRenderer(index);\r\n\t\t\titem.data = dataItem;\r\n\t\t}\r\n\t\tthis.doState();\r\n\t}\r\n\r\n\t_getRenderer(index) {\r\n\t\tif (this._items.length - 1 < index) {\r\n\t\t\tlet renderer = new this._rendererClass(this, \"item_\" + index);\r\n\t\t\tthis._items[index] = renderer;\r\n\t\t\trenderer.on(UIList.EVENT_ITEM_CHANGE, this.onItemChange, this);\r\n \t\t}\r\n\t\treturn this._items[index];\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.UIComponents.UIList#getStateId\r\n\t * @inheritDoc\r\n\t * @returns {String}\r\n\t */\r\n\tgetStateId() {\r\n\t\treturn \"count_\" + (this._data ? this._data.length : \"0\");\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.UIComponents.UIList#destroy\r\n\t * @protected\r\n\t * @inheritDoc\r\n\t */\r\n\tdestroy(fromScene) {\r\n\t\tthis.clean();\r\n\t\tsuper.destroy(fromScene);\r\n\t}\r\n\r\n\tonItemChange(item) {\r\n\t\tthis.emit(UIList.EVENT_ITEM_CHANGE, item);\r\n\t}\r\n}","import UIButton from \"./UIButton\";\r\nimport UIButtonRadio from \"./UIButtonRadio\";\r\nimport UIComponentPrototype from \"./UIComponentPrototype\";\r\nimport UIButtonSelect from \"./UIButtonSelect\";\r\nimport UIButtonDraggable from \"./UIButtonDraggable\";\r\nimport UIScrollBar from \"./UIScrollBar\";\r\nimport UIScrollPanel from \"./UIScrollPanel\";\r\nimport UIProgressBar from \"./UIProgressBar\";\r\nimport UIContainer from \"./UIContainer\";\r\nimport UIList from \"./UIList\";\r\nimport UIListBaseItem from \"./UIListBaseItem\";\r\n\r\n/**\r\n * @namespace PhaserComps.UIComponents\r\n */\r\n\r\nconst UIComponents = {\r\n\tUIComponentPrototype: UIComponentPrototype,\r\n\tUIButton: UIButton,\r\n\tUIButtonSelect: UIButtonSelect,\r\n\tUIButtonRadio: UIButtonRadio,\r\n\tUIButtonDraggable: UIButtonDraggable,\r\n\tUIScrollBar: UIScrollBar,\r\n\tUIScrollPanel: UIScrollPanel,\r\n\tUIProgressBar: UIProgressBar,\r\n\tUIContainer: UIContainer,\r\n\tUIList: UIList,\r\n\tUIListBaseItem: UIListBaseItem\r\n};\r\n\r\nexport default UIComponents;","import UIButtonSelect from \"./UIButtonSelect\";\r\n\r\nconst _EVENT_SELECT = \"event_select\";\r\n\r\n/**\r\n * @class UIButtonRadio\r\n * @memberOf PhaserComps.UIComponents\r\n * @extends PhaserComps.UIComponents.UIButtonSelect\r\n * @classdesc\r\n * Radio button.\r\n * Several radio buttons can be grouped by appending them to the first button in the group,\r\n * You can do it via passing first button to `appendTo` constructor argument of other instances,\r\n * or use [appendToRadio]{@link PhaserComps.UIComponents.UIButtonRadio#appendToRadio} method.\r\n *\r\n * @property {Boolean} select set or get, if current instance selected\r\n * @property {*} value get or set current instance value\r\n * @property {*} valueSelected If read, returns value of currently selected radio instance in the group.\r\n * If assigned, selects radio which has provided value.\r\n *\r\n * @extends PhaserComps.UIComponents.UIButtonSelect\r\n * @emits PhaserComps.UIComponents.UIButton.EVENT_SELECT\r\n *\r\n * @param {PhaserComps.UIComponents.UIComponentPrototype} [parent] UIComponentPrototype instance to find clip inside\r\n * @param {String} [key] key to find clip inside parent\r\n * @param {String} [labelText] text to set for a 'label' key\r\n * @param {*} [value] Any value, applied to current radio button instance.\r\n * Use it to find out, what is the current selected value in the group,\r\n * or select radio by provided value\r\n * @param {UIButtonRadio} [appendTo] If specified, this instance will be appended\r\n * to provided radio group immediately\r\n */\r\n\r\nexport default class UIButtonRadio extends UIButtonSelect {\r\n\r\n\t/**\r\n\t *\r\n\t * @event PhaserComps.UIComponents.UIButtonRadio.EVENT_SELECT\r\n\t * @memberOf PhaserComps.UIComponents.UIButtonRadio\r\n\t * @description\r\n\t * Fired when some radio button of the group is selected\r\n\t */\r\n\tstatic get EVENT_SELECT() { return _EVENT_SELECT; }\r\n\r\n\tconstructor(parent, key, labelText, value, appendTo) {\r\n\t\tsuper(parent, key, labelText);\r\n\t\tthis._sibling = this;\r\n\t\tthis._value = value;\r\n\t\tif (typeof appendTo !== \"undefined\") {\r\n\t\t\tthis.appendToRadio(appendTo);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.UIComponents.UIButtonRadio#appendToRadio\r\n\t * @description\r\n\t * Append this radio instance to provided radio sibling ring\r\n\t * @param {UIButtonRadio} radio radio button to append to sibling ring\r\n\t */\r\n\tappendToRadio(radio) {\r\n\t\tif (this._sibling !== this) {\r\n\t\t\tthis.removeFromSibling();\r\n\t\t}\r\n\t\tthis._sibling = radio._sibling;\r\n\t\tradio._sibling = this;\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.UIComponents.UIButtonRadio#removeFromSibling\r\n\t * @description\r\n\t * Remove this radio button from sibling ring\r\n\t */\r\n\tremoveFromSibling() {\r\n\t\t// TODO\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.UIComponents.UIButtonRadio#_onClick\r\n\t * @inheritDoc\r\n\t * @protected\r\n\t */\r\n\t_onClick() {\r\n\t\tthis.select = true;\r\n\t}\r\n\r\n\tget select() { return super.select; }\r\n\tset select(val) {\r\n\t\tif (this._select === val) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsuper.select = val;\r\n\t\tif (val) {\r\n\t\t\tlet radio = this._sibling;\r\n\t\t\twhile (radio !== this) {\r\n\t\t\t\tradio.select = false;\r\n\t\t\t\tradio = radio._sibling;\r\n\t\t\t}\r\n\t\t\tthis._broadcastSelect();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.UIComponents.UIButtonRadio#_broadcastSelect\r\n\t * @description\r\n\t * Broadcast select event from all siblings\r\n\t * @private\r\n\t * @ignore\r\n\t */\r\n\t_broadcastSelect() {\r\n\t\tthis.emit(_EVENT_SELECT, this.value);\r\n\t\tlet radio = this._sibling;\r\n\t\twhile (radio !== this) {\r\n\t\t\tradio.emit(_EVENT_SELECT, this._value);\r\n\t\t\tradio = radio._sibling;\r\n\t\t}\r\n\t}\r\n\r\n\tget value() {\r\n\t\treturn this._value;\r\n\t}\r\n\r\n\tset value(val) {\r\n\t\tthis._value = val;\r\n\t}\r\n\r\n\tget valueSelected() {\r\n\t\tif (this.select) {\r\n\t\t\treturn this.value;\r\n\t\t}\r\n\t\tlet radio = this._sibling;\r\n\t\twhile (radio !== this) {\r\n\t\t\tif (radio.select) {\r\n\t\t\t\treturn radio.value;\r\n\t\t\t}\r\n\t\t\tradio = radio._sibling;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tset valueSelected(val) {\r\n\t\tif (this.value === val) {\r\n\t\t\tthis.select = true;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet radio = this._sibling;\r\n\t\twhile (radio !== this) {\r\n\t\t\tif (radio.value === val) {\r\n\t\t\t\tradio.select = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","import UIComponentPrototype from \"./UIComponentPrototype\";\r\nimport UIScrollBar from \"./UIScrollBar\";\r\n\r\n/**\r\n * @typedef ScrollBoundsObject\r\n * @description\r\n * Object is generated automatically on container's clip update, by the `dimensions` clip\r\n * @memberOf PhaserComps.UIComponents.UIScrollPanel\r\n * @property {Number} x Start x position of the container. Used, if panel is horizontal\r\n * @property {Number} y Start x position of the container. Used, if panel is vertical\r\n * @property {Number} len Scroll distance of the container. On scroll down/right,\r\n * x or y position will be subtracted by `len` multiplied by scrollbar value\r\n */\r\n\r\n\r\n/**\r\n * @class UIScrollPanel\r\n * @memberOf PhaserComps.UIComponents\r\n * @classdesc\r\n * Scrolling panel with scrollbar applied to it.\r\n * First parameter is container, where this should find the panel, scroll bar and dimensions instances\r\n * UIScrollBar instance created inside with a provided `scrollBarKey` <br><br>\r\n *\r\n * **Warning! This component doesn't extend UIComponent.ComponentPrototype**\r\n *\r\n * @param {PhaserComps.UIComponents.UIComponentPrototype} container\r\n * @param {String} panelKey\r\n * @param {String} scrollBarKey\r\n * @param {String} dimensionsKey\r\n * @param {Boolean} [vertical=false]\r\n */\r\n\r\nexport default class UIScrollPanel {\r\n\r\n\tconstructor(container, panelKey, scrollBarKey, dimensionsKey, vertical) {\r\n\t\t/** @type PhaserComps.UIComponents.UIComponentPrototype */\r\n\t\tthis._container = container;\r\n\t\tcontainer.on(UIComponentPrototype.EVENT_STATE, this._onContainerUpdate, this);\r\n\r\n\t\t/** @type String */\r\n\t\tthis._panelKey = panelKey;\r\n\t\t/** @type String */\r\n\t\tthis._dimensionsKey = dimensionsKey;\r\n\r\n\t\t/** @type PhaserComps.UIComponents.UIScrollBar */\r\n\t\tthis._scrollBar = new UIScrollBar(container, scrollBarKey, vertical);\r\n\t\tthis._scrollBar.on(UIScrollBar.EVENT_CHANGE, this._onScrollBar, this);\r\n\r\n\t\t/** @type Boolean */\r\n\t\tthis._vertical = vertical || false;\r\n\t}\r\n\r\n\t/**\r\n\t * update clip instances on container update\r\n\t * @method PhaserComps.UIComponents.UIScrollPanel#_onContainerUpdate\r\n\t * @private\r\n\t */\r\n\t_onContainerUpdate() {\r\n\t\t/** @type PhaserComps.ComponentClip */\r\n\t\tlet clip = this._container._clip;\r\n\t\tif (!clip) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t/** @type PhaserComps.ComponentClip */\r\n\t\tthis._panel = clip.getChildClip(this._panelKey);\r\n\t\tlet dims = clip.getChildClip(this._dimensionsKey);\r\n\t\tif (!this._panel || !dims) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t/**\r\n\t\t *\r\n\t\t * @type ScrollBoundsObject\r\n\t\t */\r\n\t\tthis._scrollBounds = {\r\n\t\t\tx: dims.x,\r\n\t\t\ty: dims.y,\r\n\t\t\tlen: this._vertical ? this._panel.height - dims.height : this._panel.width - dims.width\r\n\t\t};\r\n\r\n\t\t// update current panel position\r\n\t\tthis._onScrollBar(this._onScrollBar.value);\r\n\t}\r\n\r\n\t/**\r\n\t * Update panel position on scrollbar change\r\n\t * @method PhaserComps.UIComponents.UIScrollPanel#_onScrollBar\r\n\t * @private\r\n\t */\r\n\t_onScrollBar(value) {\r\n\t\tif (!this._panel || !this._scrollBounds) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this._vertical) {\r\n\t\t\tthis._panel.y = this._scrollBounds.y - this._scrollBounds.len * value;\r\n\t\t} else {\r\n\t\t\tthis._panel.x = this._scrollBounds.x - this._scrollBounds.len * value;\r\n\t\t}\r\n\t}\r\n}","import UIComponentPrototype from \"./UIComponentPrototype\";\r\n\r\nconst PROGRESS_STATE_REGEX = /progress_(\\d+)$/;\r\n\r\n/**\r\n * @typedef StepConfig\r\n * @memberOf PhaserComps.UIComponents.UIScrollBar\r\n * @extends Object\r\n *\r\n * @property {Number} stepValue max value of this step\r\n * @property {PhaserComps.ComponentClip.StateConfig} config\r\n */\r\n\r\n/**\r\n * @memberOf PhaserComps.UIComponents\r\n * @class UIProgressBar\r\n * @classdesc\r\n * Progress bar.\r\n *\r\n * Setup states `progress_0` and `progress_100` in Animate,\r\n * and all differences between them will be interpolated to the current progress value.\r\n * Also you can create intermediate states, if you want to control intermediate interpolation behaviour.\r\n\r\n * For example, if you want an indicator to rotate a full circle, you need to create additional\r\n * intermediate states `progress_30` and `progress_70` with 30% and 70$ of rotation,\r\n * to be sure, that indicator will rotate in the needed direction.\r\n *\r\n * Also you can use intermediate states to make interpolation not linear for all progress range.\r\n *\r\n * Available properties for interpolating are\r\n * `x`, `y`, `scaleX`, `scaleY`, `angle`, `alpha`\r\n *\r\n * @property {Number} value current progress value, between 0 and 1\r\n *\r\n * @extends PhaserComps.UIComponents.UIComponentPrototype\r\n * @param {PhaserComps.UIComponents.UIComponentPrototype} [parent] UIComponentPrototype instance to find clip inside\r\n * @param {String} [key] key to find clip inside parent\r\n */\r\nexport default class UIProgressBar extends UIComponentPrototype {\r\n\tconstructor(parent, key) {\r\n\t\tsuper(parent, key);\r\n\r\n\t\t/**\r\n\t\t * current progress value\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._value = 0;\r\n\t\t/**\r\n\t\t *\r\n\t\t * @type {Array<StepConfig>}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._steps = [];\r\n\t}\r\n\r\n\tget value() {\r\n\t\treturn this._value;\r\n\t}\r\n\r\n\tset value(v) {\r\n\t\tthis._value = v;\r\n\t\tthis._applyValue();\r\n\t}\r\n\r\n\r\n\tonClipAppend(clip) {\r\n\t\tsuper.onClipAppend(clip);\r\n\t\tthis._makeSteps(clip);\r\n\t\tthis._applyValue();\r\n\t}\r\n\r\n\t/**\r\n\t * Apply current value to setup elements positions\r\n\t * @method PhaserComps.UIComponents.UIScrollBar#_applyValue\r\n\t * @private\r\n\t */\r\n\t_applyValue() {\r\n\t\tif (!this._clip) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet i, lowConfig, highConfig, interpolation, resultConfig, childId;\r\n\t\tlet stepsCount = this._steps.length;\r\n\t\tfor (i = 0; i < stepsCount - 1; i++) {\r\n\t\t\tlet low = this._steps[i];\r\n\t\t\tlet high = this._steps[i + 1];\r\n\t\t\tif (low.stepValue === this._value) {\r\n\t\t\t\tresultConfig = low.config;\r\n\t\t\t\tbreak;\r\n\t\t\t} else if (high.stepValue === this._value) {\r\n\t\t\t\tresultConfig = high.config;\r\n\t\t\t\tbreak;\r\n\t\t\t} else if (this._value > low.stepValue && this._value < high.stepValue) {\r\n\t\t\t\tlowConfig = low.config;\r\n\t\t\t\thighConfig = high.config;\r\n\t\t\t\tinterpolation = (this._value - low.stepValue) / (high.stepValue - low.stepValue);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// make interpolated children configs\r\n\t\tif (!resultConfig) {\r\n\t\t\tresultConfig = {};\r\n\t\t\tfor (childId in lowConfig) {\r\n\t\t\t\tif (!highConfig.hasOwnProperty(childId)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tlet lowChildConfig = lowConfig[childId];\r\n\t\t\t\tlet highChildConfig = highConfig[childId];\r\n\t\t\t\tresultConfig[childId] = {\r\n\t\t\t\t\tx: lowChildConfig.x + (highChildConfig.x - lowChildConfig.x) * interpolation,\r\n\t\t\t\t\ty: lowChildConfig.y + (highChildConfig.y - lowChildConfig.y) * interpolation,\r\n\t\t\t\t\tscaleX: lowChildConfig.scaleX + (highChildConfig.scaleX - lowChildConfig.scaleX) * interpolation,\r\n\t\t\t\t\tscaleY: lowChildConfig.scaleY + (highChildConfig.scaleY - lowChildConfig.scaleY) * interpolation,\r\n\t\t\t\t\tangle: lowChildConfig.angle + (highChildConfig.angle - lowChildConfig.angle) * interpolation,\r\n\t\t\t\t\talpha: lowChildConfig.alpha + (highChildConfig.alpha - lowChildConfig.alpha) * interpolation\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// apply children configs\r\n\t\tfor (childId in resultConfig) {\r\n\t\t\tthis._clip.applyChildParams(childId, resultConfig[childId]);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Retreive all progress states and setup all progress steps, that will be used to control\r\n\t * @param {PhaserComps.ComponentClip} clip\r\n\t * @private\r\n\t */\r\n\t_makeSteps(clip) {\r\n\t\tlet stateIds = clip.getStateIds();\r\n\t\t/**\r\n\t\t * @type {{stepValue: number, config: {}}[]}\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._steps = [];\r\n\t\tfor (let stateId of stateIds) {\r\n\t\t\tif (!PROGRESS_STATE_REGEX.test(stateId)) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tlet stepConfig = {};\r\n\t\t\tlet stepObject = {\r\n\t\t\t\tstepValue: parseInt(PROGRESS_STATE_REGEX.exec(stateId)[1]) / 100,\r\n\t\t\t\tconfig: stepConfig\r\n\t\t\t};\r\n\t\t\tlet stateConfig = clip.getStateConfig(stateId);\r\n\t\t\tfor (let childId in stateConfig) {\r\n\t\t\t\tstepConfig[childId] = UIProgressBar._makeFullConfig(stateConfig[childId]);\r\n\t\t\t}\r\n\t\t\tthis._steps.push(stepObject);\r\n\t\t}\r\n\t\tthis._steps.sort((a, b) => a.stepValue - b.stepValue);\r\n\t}\r\n\r\n\t/**\r\n\t * Obviously create all state properties, even if they have default values\r\n\t *\r\n\t * @param config\r\n\t * @returns {{\r\n\t * \tscaleX: number,\r\n\t * \tscaleY: number,\r\n\t * \talpha: number,\r\n\t * \tx: number,\r\n\t * \ty: number,\r\n\t * \tangle: number\r\n\t * }}\r\n\t * @private\r\n\t */\r\n\tstatic _makeFullConfig(config) {\r\n\t\treturn {\r\n\t\t\tx: config.hasOwnProperty(\"x\") ? config.x : 0,\r\n\t\t\ty: config.hasOwnProperty(\"y\") ? config.y : 0,\r\n\t\t\tscaleX: config.hasOwnProperty(\"scaleX\") ? config.scaleX : 1,\r\n\t\t\tscaleY: config.hasOwnProperty(\"scaleY\") ? config.scaleY : 1,\r\n\t\t\tangle: config.hasOwnProperty(\"angle\") ? config.angle : 0,\r\n\t\t\talpha: config.hasOwnProperty(\"alpha\") ? config.alpha : 1\r\n\t\t}\r\n\t}\r\n}","import UIComponentPrototype from \"./UIComponentPrototype\";\r\n\r\n/**\r\n * @memberOf PhaserComps.UIComponents\r\n * @class UIContainer\r\n * @classdesc\r\n * Base container component. Allows to add dynamically created UIComponents inside other components.\r\n *\r\n * Child components clips must be root components only, not any clip's children.\r\n *\r\n * Note, that UIContainer can be only a child component of another UIComponentPrototype instance.\r\n *\r\n * @extends PhaserComps.UIComponents.UIComponentPrototype\r\n * @param {PhaserComps.UIComponents.UIComponentPrototype} parent UIComponentPrototype instance to find clip inside\r\n * @param {String} key key to find clip inside parent\r\n */\r\n\r\nexport default class UIContainer extends UIComponentPrototype {\r\n\r\n\tconstructor(parent, key) {\r\n\t\tsuper(parent, key);\r\n\r\n\t\t/**\r\n\t\t * List of children UIComponentPrototypes added\r\n\t\t * @type {Array<PhaserComps.UIComponents.UIComponentPrototype>}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._children = [];\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.UIComponents.UIContainer#addChild\r\n\t * @description\r\n\t * Adds child to children list, and adds it to Phaser container instance, if one exists\r\n\t *\r\n\t * @param {PhaserComps.UIComponents.UIComponentPrototype} child child component to add\r\n\t * @return {PhaserComps.UIComponents.UIComponentPrototype} child\r\n\t */\r\n\taddChild(child) {\r\n\t\tif (this._children.indexOf(child) !== -1) {\r\n\t\t\treturn child; // TODO move to top?\r\n\t\t}\r\n\t\tthis._children.push(child);\r\n\r\n\t\t// add to container instance, or hide\r\n\t\tif (this._clip) {\r\n\t\t\tchild._clip.visible = true;\r\n\t\t\tthis._addUIComponentToContainerClip(child);\r\n\t\t} else {\r\n\t\t\tchild._clip.visible = false;\r\n\t\t}\r\n\t\treturn child;\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.UIComponents.UIContainer#removeChild\r\n\t * @description\r\n\t * Removes child from children list, and removes it from Phaser container instance, if one exists\r\n\t *\r\n\t * @param {PhaserComps.UIComponents.UIComponentPrototype} child child component to remove\r\n\t * @return {PhaserComps.UIComponents.UIComponentPrototype} returns child param\r\n\t */\r\n\tremoveChild(child) {\r\n\t\tlet index = this._children.indexOf(child);\r\n\t\tif (index === -1) {\r\n\t\t\treturn child;\r\n\t\t}\r\n\t\tthis._children.splice(index, 1);\r\n\r\n\t\tif (this._clip) {\r\n\t\t\tthis._removeUIComponentFromContainerClip(child);\r\n\t\t}\r\n\t\treturn child;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param {PhaserComps.UIComponents.UIComponentPrototype} child\r\n\t * @private\r\n\t */\r\n\t_addUIComponentToContainerClip(child) {\r\n\t\tthis._clip.add(child._clip);\r\n\t\tchild._clip.visible = true;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param {PhaserComps.UIComponents.UIComponentPrototype} child\r\n\t * @param {Boolean} [destroyChild=false]\r\n\t * @private\r\n\t */\r\n\t_removeUIComponentFromContainerClip(child, destroyChild) {\r\n\t\tthis._clip.remove(child._clip, destroyChild);\r\n\t\tchild._clip.visible = false;\r\n\t}\r\n\r\n\tonClipAppend(clip) {\r\n\t\tsuper.onClipAppend(clip);\r\n\t\tif (clip) {\r\n\t\t\tfor (let child of this._children) {\r\n\t\t\t\tthis._addUIComponentToContainerClip(child);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonClipRemove(clip) {\r\n\t\tsuper.onClipRemove(clip);\r\n\t\t// hide and remove children from current container\r\n\t\tif (clip) {\r\n\t\t\tfor (let child of this._children) {\r\n\t\t\t\tthis._removeUIComponentFromContainerClip(child);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\t// remove and destroy children\r\n\t\tfor (let child of this._children) {\r\n\t\t\tif (this._clip) { // TODO check if needed\r\n\t\t\t\tthis._removeUIComponentFromContainerClip(child);\r\n\t\t\t}\r\n\t\t\tchild.destroy();\r\n\t\t}\r\n\t\tthis._children.length = 0;\r\n\t\tsuper.destroy();\r\n\t}\r\n}","import UIComponentPrototype from \"./UIComponentPrototype\";\r\nimport UIList from \"./UIList\";\r\n\r\n\r\n/**\r\n * @class UIListBaseItem\r\n * @memberOf PhaserComps.UIComponents\r\n * @classdesc\r\n *\r\n * Base class for UIList component renderer. Extend it to create custom list items renderers.\r\n *\r\n * @emits PhaserComps.UIComponents.UIList.EVENT_ITEM_CHANGE\r\n * @property {*} data any data from UIList data list\r\n *\r\n * @param {PhaserComps.UIComponents.UIComponentPrototype} [parent] UIComponentPrototype instance to find clip inside\r\n * @param {String} [key] key to find clip inside parent\r\n * @param {Class} rendererClass class for items, best if extending `UIListBaseItem`\r\n */\r\n\r\nexport default class UIListBaseItem extends UIComponentPrototype {\r\n\tconstructor(parent, key) {\r\n\t\tsuper(parent, key);\r\n\t\tthis._data = null;\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.UIComponents.UIListBaseItem#notifyChange\r\n\t * @desc Emits change event to containing UIList instance\r\n\t */\r\n\tnotifyChange() {\r\n\t\tthis.emit(UIList.EVENT_ITEM_CHANGE, this);\r\n\t}\r\n\r\n\t/**\r\n\t * @method PhaserComps.UIComponents.UIListBaseItem#_commitData\r\n\t * @protected\r\n\t * @desc apply data from setter, override it\r\n\t */\r\n\t_commitData() {\r\n\t\t// override\r\n\t}\r\n\r\n\tget data() {\r\n\t\treturn this._data;\r\n\t}\r\n\r\n\tset data(value) {\r\n\t\tthis._data = value;\r\n\t\tthis._commitData();\r\n\t}\r\n}","import Phaser from \"phaser\";\r\nimport ComponentClip from \"../clip/ComponentClip\";\r\n\r\n/**\r\n * @class Plugin\r\n * @memberOf PhaserComps\r\n * @classdesc\r\n * Phaser 3 plugin, adds `ui_component` method to scene GameObjectFactory and GameObjectCreator,\r\n * that creates a {@link PhaserComps.ComponentClip} instance\r\n *\r\n * *Note. Factory method (`scene.make.ui_component()`) also adds clip instance to scene*\r\n *\r\n * Implementation example:\r\n * ```javascript\r\n * import \"phaser-ui-comps\"\r\n *\r\n * var config = {\r\n *     type: Phaser.AUTO,\r\n *     parent: \"example\",\r\n *     width: 800,\r\n *     height: 600,\r\n *     scene: {\r\n *  \t   create: create\r\n *     },\r\n *     plugins: {\r\n *  \t   global: [\r\n *  \t\t   PhaserComps.Plugin.DefaultCfg\r\n *  \t   ]\r\n *     }\r\n * var game = new Phaser.Game(config);\r\n *\r\n * create() {\r\n *     let configObject = {}; // here must be real jsfl-generated config object\r\n *     let texture_name = \"your_texture_name\";\r\n *     this.add.ui_component(configObject, [texture_name]);\r\n * }\r\n * ```\r\n * @see PhaserComps.ComponentClip\r\n *\r\n */\r\nexport default class Plugin extends Phaser.Plugins.BasePlugin {\r\n    constructor(mgr) {\r\n        super(mgr);\r\n        mgr.registerGameObject(\"ui_component\", this.addComponent, this.makeComponent);\r\n    }\r\n\r\n    addComponent(config, textures) {\r\n        let clip = new ComponentClip(this.scene, config, textures);\r\n        this.scene.add.existing(clip);\r\n        return clip;\r\n    }\r\n\r\n    makeComponent(config, textures) {\r\n        return new ComponentClip(this.scene, config, textures);\r\n    }\r\n}\r\n\r\nconst DefaultCfg = {\r\n    key: \"UIComponents\",\r\n    plugin: Plugin,\r\n    start: true\r\n};\r\n\r\n/**\r\n * Default plugin config\r\n *\r\n * @const PhaserComps.Plugin.DefaultCfg\r\n * @memberOf PhaserComps.Plugin\r\n * @type PluginObjectItem\r\n */\r\nPlugin.DefaultCfg = DefaultCfg;"],"sourceRoot":""}